{% extends 'base.html' %} {% block content %}
<section>
    <div class="row">
        <div class="col s12">
            <h1 class="recipe-name">{{recipe.name}}</h1>
        </div>
        <div class="recipe-image-container col s12 m10 offset-m1 l6">
            <img class="img-dimentions" src="{{recipe.image_url}}"></img>
        </div>
        <div class="col s12 l6">
            <p class="recipe-description center-align z-depth-3">{{recipe.description}}</p>
            <div class="info-section z-depth-3 center-align">
                <div class="row">
                    <div class="col s4">
                        <p>Prep time: {{recipe.prep_time}}</p>
                    </div>
                    <div class="col s4">
                        <p>Category: {{recipe.category}}</p>
                    </div>
                    <div class="col s4">
                        <p>Diet: {{recipe.diet}}</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col s4">
                        <p>Cooking time: {{recipe.cooking_time}}</p>
                    </div>
                    <div class="col s4">
                        <p>Cuisine: {{recipe.cuisine}}</p>
                    </div>
                    <div class="col s4">
                        <p>Type: {{recipe.type}}</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col s4">
                        <p>Servings: {{recipe.servings}}</p>
                    </div>
                    <div class="col s4">
                        <p>Author: {{recipe.author}}</p>
                    </div>
                    <div class="col s4">
                        <p>User: {{recipe.user}}</p>
                    </div>
                </div>
                <a class="btn-floating pulse" href="{{ url_for('edit_recipe', recipe_id=recipe._id, username=session.username) }}"><i class="medium material-icons">edit</i></a>
                <a class="btn-floating pulse modal-trigger" href="#delete_recipe"><i class="medium material-icons">delete</i></a>
                <a class="btn-floating pulse" href="{{ url_for('save_recipe', recipe_id=recipe._id, username=session.username) }}"><i class="medium material-icons">star</i></a>
            </div>
            {% if message %}
            <div class="col s12 displayed-message">
                <div class="card blue-grey darken-1 message-container">
                    <div class="card-content white-text center-align">
                        <p>{{message}}</p>
                    </div>
                </div>
            </div>
            {% else %}
            <div class="col s12 hide">
                <div class="card blue-grey darken-1 message-container">
                    <div class="card-content white-text center-align">
                        <p>{{message}}</p>
                    </div>
                </div>
            </div>
            {% endif %}
        </div>
    </div>
</section>

<section>
    <div class="row">
        <div class="col s12 m6">
            <div class="z-depth-3 allergins-section">
                <h2 class="section-title">Allergins</h2>
                <div class="row">
                    <ol>
                        {% for recipe_allergin in recipe.allergins %}
                        <li class="col s12">
                            <p>{{recipe_allergin}}
                                <a class="btn-floating pulse right modal-trigger" href="#edit_allergen"><i class="medium material-icons">edit</i></a>
                                <a class="btn-floating pulse right" href=""><i class="medium material-icons">delete</i></a>
                            </p>
                        </li>
                        {% endfor %}
                        <!--Edit allergin Modal-->
                        <div id="edit_allergen" class="modal">
                            {% for allergin in allergins %}
                            <form action="{{ url_for('edit_allergin', recipe_id=recipe._id, username=session.username, allergin_id=allergin._id, recipe_allergin=recipe_allergin) }}" method="POST">
                            {% endfor %} 
                                <div class="modal-content">
                                    <h4>Edit Allergin</h4>
                                    <div class="row">
                                        <div class="col s12">
                                            <select name="allergin">
                                                <option value='{{recipe_allergin}}' disabled selected>{{recipe_allergin}}</option>
                                                {% for allergin_ in allergins_modal %}
                                                <option value='{{allergin_.name}}'>{{allergin_.name}}</option>
                                                {% endfor %}
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button class="btn modal-close waves-effect waves-green btn-flat" type="submit">Confirm Edit</button>
                                    <a href="#" class="btn modal-close waves-effect waves-green btn-flat">No</a>
                                </div>
                            </form>
                        </div>
                    </ol>
                </div>
                <div class="row">
                    <div class="col s12">
                        <form action="{{url_for('add_allergin', recipe_id=recipe._id, username=session.username)}}" method="POST">
                            <div class="row">
                                <div class="input-field col s12">
                                    <div class="row">
                                        <div class="col s11">
                                            <select name="allergin">
                                                <option disabled selected>Choose your option</option>
                                                {% for allergin in allergins_selector %}
                                                <option value='{{allergin.name}}'>{{allergin.name}}</option>
                                                {% endfor %} 
                                            </select>
                                        </div>
                                        <div class="col s1">
                                            <button class="btn waves-effect waves-light btn-floating pulse right" type="submit"><i class="medium material-icons">add</i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    {% if allergin_message %}
                    <div class="col s12 displayed-message">
                        <div class="card blue-grey darken-1 message-container">
                            <div class="card-content white-text center-align">
                                <p>{{allergin_message}}</p>
                            </div>
                        </div>
                    </div>
                    {% else %}
                    <div class="col s12 hide">
                        <div class="card blue-grey darken-1 message-container">
                            <div class="card-content white-text center-align">
                                <p>{{allergin_message}}</p>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="col s12 m6">
            <div class="z-depth-3 ingredients-section">
                <h2 class="section-title">Ingredients</h2>
                <div class="row">
                    <ol>
                        {% for ingredient in recipe.ingredients %}
                        <li class="col s12">
                            <p>{{ingredient}}
                                <a class="btn-floating pulse right" href=""><i class="medium material-icons">edit</i></a>
                                <a class="btn-floating pulse right" href=""><i class="medium material-icons">delete</i></a>
                            </p>
                        </li>
                        {% endfor %}
                    </ol>
                </div>
                <div class="row">
                    <div class="col s12">
                        <form action="{{url_for('add_ingredient', recipe_id=recipe._id, username=session.username)}}" method="POST">
                            <div class="row">
                                <div class="input-field col s12">
                                    <div class="row">
                                        <div class="col s11">
                                            <label for="ingredient">Add Ingredient:</label>
                                            <input id="ingredient" name="ingredient" type="text" class="validate">
                                        </div>
                                        <div class="col s1">
                                            <button class="btn waves-effect waves-light btn-floating pulse right" type="submit"><i class="medium material-icons">add</i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    {% if ingredient_message %}
                    <div class="col s12 displayed-message">
                        <div class="card blue-grey darken-1 message-container">
                            <div class="card-content white-text center-align">
                                <p>{{ingredient_message}}</p>
                            </div>
                        </div>
                    </div>
                    {% else %}
                    <div class="col s12 hide">
                        <div class="card blue-grey darken-1 message-container">
                            <div class="card-content white-text center-align">
                                <p>{{ingredient_message}}</p>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>

<section>
    <div class="row">
        <div class="col s12 m12">
            <div class="z-depth-3 instructions-section">
                <h2 class="section-title">Instructions</h2>
                <div class="row">
                    <ol>
                        {% for instruction in recipe.instructions %}
                        <li class="col s12">
                            <p>{{instruction}}
                                <a class="btn-floating pulse right" href=""><i class="medium material-icons">edit</i></a>
                                <a class="btn-floating pulse right" href=""><i class="medium material-icons">delete</i></a>
                            </p>
                        </li>
                        {% endfor %}
                    </ol>
                </div>
                <div class="row">
                    <div class="col s12">
                        <form action="{{url_for('add_instruction', recipe_id=recipe._id, username=session.username)}}" method="POST">
                            <div class="row">
                                <div class="input-field col s12">
                                    <div class="row">
                                        <div class="col s11">
                                            <label for="instruction">Add Instruction:</label>
                                            <input id="instruction" name="instruction" type="text" class="validate">
                                        </div>
                                        <div class="col s1">
                                            <button class="btn waves-effect waves-light btn-floating pulse right" type="submit"><i class="medium material-icons">add</i></button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    {% if instruction_message %}
                    <div class="col s12 displayed-message">
                        <div class="card blue-grey darken-1 message-container">
                            <div class="card-content white-text center-align">
                                <p>{{instruction_message}}</p>
                            </div>
                        </div>
                    </div>
                    {% else %}
                    <div class="col s12 hide">
                        <div class="card blue-grey darken-1 message-container">
                            <div class="card-content white-text center-align">
                                <p>{{instruction_message}}</p>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Modals -->
<div id="delete_recipe" class="modal">
    <div class="modal-content">
        <h4>Delete Recipe</h4>
        <p>Are you sure you want to delete this recipe ?</p>
    </div>
    <div class="modal-footer">
        <a href="{{ url_for('delete_recipe', recipe_id=recipe._id, username=session.username) }}" class="btn modal-close waves-effect waves-green btn-flat">Yes</a>
        <a href="#" class="btn modal-close waves-effect waves-green btn-flat">No</a>
    </div>
</div>


{% endblock %}
